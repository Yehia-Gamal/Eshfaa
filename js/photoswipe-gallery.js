var initPhotoSwipeFromDOM=function(e){for(var t=function(e){for(var t,r,n,i,l=e.childNodes,o=l.length,a=[],u=0;u<o;u++)1===(t=l[u]).nodeType&&(n=(r=t.children[0]).getAttribute("data-size").split("x"),i={src:r.getAttribute("href"),w:parseInt(n[0],10),h:parseInt(n[1],10)},t.children.length>1&&(i.title=t.children[1].innerHTML),r.children.length>0&&(i.msrc=r.children[0].getAttribute("src")),i.el=t,a.push(i));return a},r=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=function e(t,r){return t&&(r(t)?t:e(t.parentNode,r))}(e.target||e.srcElement,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(t){for(var r,i=t.parentNode,l=t.parentNode.childNodes,o=l.length,a=0,u=0;u<o;u++)if(1===l[u].nodeType){if(l[u]===t){r=a;break}a++}return r>=0&&n(r,i),!1}},n=function(e,r,n){var i,l,o,a=document.querySelectorAll(".pswp")[0];o=t(r),l={index:e,galleryUID:r.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=o[e].el.getElementsByTagName("img")[0],r=window.pageYOffset||document.documentElement.scrollTop,n=t.getBoundingClientRect();return{x:n.left,y:n.top+r,w:n.width}},history:!1,focus:!1},n&&(l.showAnimationDuration=0),(i=new PhotoSwipe(a,PhotoSwipeUI_Default,o,l)).init()},i=document.querySelectorAll(e),l=0,o=i.length;l<o;l++)i[l].setAttribute("data-pswp-uid",l+1),i[l].onclick=r;var a=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var r=e.split("&"),n=0;n<r.length;n++){if(r[n]){var i=r[n].split("=");!(i.length<2)&&(t[i[0]]=i[1])}}return t.gid&&(t.gid=parseInt(t.gid,10)),t.hasOwnProperty("pid")&&(t.pid=parseInt(t.pid,10)),t}();a.pid>0&&a.gid>0&&n(a.pid-1,i[a.gid-1],!0)};initPhotoSwipeFromDOM(".my-simple-gallery");